#! DOCKER > wolfram -script output/Tests/FactorSquareFree_Tests.m
#! TextForm[ColonForm[MessageName[$IterationLimit, itlim], StringForm[Iteration limit of `1` exceeded., Short[HoldForm[4096], 3]]]]
#! TextForm[ColonForm[MessageName[$IterationLimit, itlim], StringForm[Iteration limit of `1` exceeded., Short[HoldForm[4096], 3]]]]
#! TextForm[ColonForm[MessageName[$IterationLimit, itlim], StringForm[Iteration limit of `1` exceeded., Short[HoldForm[4096], 3]]]]
#! TextForm[ColonForm[MessageName[General, stop], StringForm[Further output of `1` will be suppressed during this calculation., Short[HoldForm[MessageName[$IterationLimit, itlim]], 3]]]]
#! TextForm[ColonForm[MessageName[$RecursionLimit, reclim], StringForm[Recursion depth of `1` exceeded., Short[HoldForm[1024], 3]]]]
#! TextForm[ColonForm[MessageName[$RecursionLimit, reclim], StringForm[Recursion depth of `1` exceeded., Short[HoldForm[1024], 3]]]]
# SYSTEM: Mathematica_10
# TEST: FactorSquareFree_Tests
# Pull out multiple factors:
ok  FactorSquareFree[x^5 - x^3 - x^2 + 1]    ==>     (-1 + x)^2*(1 + 2*x + 2*x^2 + x^3)
    ---
    data:
        got:         2               2    3
#! (-1 + x)  (1 + 2 x + 2 x  + x )
        expect: (-1 + x)^2*(1 + 2*x + 2*x^2 + x^3)
        expect_evaluated:         2               2    3
#! (-1 + x)  (1 + 2 x + 2 x  + x )
    ...
# A complete factorization:
ok  Factor[x^5 - x^3 - x^2 + 1]    ==>     (-1 + x)^2*(1 + x)*(1 + x + x^2)
    ---
    data:
        got:         2                   2
#! (-1 + x)  (1 + x) (1 + x + x )
        expect: (-1 + x)^2*(1 + x)*(1 + x + x^2)
        expect_evaluated:         2                   2
#! (-1 + x)  (1 + x) (1 + x + x )
    ...
# A univariate polynomial:
ok  FactorSquareFree[x^4 - 9*x^3 + 29*x^2 - 39*x + 18]    ==>     (-3 + x)^2*(2 - 3*x + x^2)
    ---
    data:
        got:         2             2
#! (-3 + x)  (2 - 3 x + x )
        expect: (-3 + x)^2*(2 - 3*x + x^2)
        expect_evaluated:         2             2
#! (-3 + x)  (2 - 3 x + x )
    ...
# A multivariate polynomial:
ok  FactorSquareFree[x^5 - x^3*y^2 - x^2*y^3 + y^5]    ==>     (x - y)^2*(x^3 + 2*x^2*y + 2*x*y^2 + y^3)
    ---
    data:
        got:        2   3      2          2    3
#! (x - y)  (x  + 2 x  y + 2 x y  + y )
        expect: (x - y)^2*(x^3 + 2*x^2*y + 2*x*y^2 + y^3)
        expect_evaluated:        2   3      2          2    3
#! (x - y)  (x  + 2 x  y + 2 x y  + y )
    ...
# A rational function:
ok  FactorSquareFree[(x^3 + x^2)/(x^2 - 4*y^2) - (x + 1)/(x^2 - 4*y^2)]    ==>     ((-1 + x)*(1 + x)^2)/(x^2 - 4*y^2)
    ---
    data:
        got:                 2
#! (-1 + x) (1 + x)
#! -----------------
     2      2
    x  - 4 y
        expect: ((-1 + x)*(1 + x)^2)/(x^2 - 4*y^2)
        expect_evaluated:                 2
#! (-1 + x) (1 + x)
#! -----------------
     2      2
    x  - 4 y
    ...
# By default algebraic number coefficients are treated as independent variables:
ok  FactorSquareFree[x^2 + 2*Sqrt[2]*x + 2]    ==>     2 + 2*Sqrt[2]*x + x^2
    ---
    data:
        got:                    2
#! 2 + 2 Sqrt[2] x + x
        expect: 2 + 2*Sqrt[2]*x + x^2
        expect_evaluated:                    2
#! 2 + 2 Sqrt[2] x + x
    ...
# With RefLink[Extension,paclet:ref/Extension]->RefLink[Automatic,paclet:ref/Automatic] algebraic dependencies between coefficients are recognized:
ok  FactorSquareFree[x^2 + 2*Sqrt[2]*x + 2, Extension -> Automatic]    ==>     (Sqrt[2] + x)^2
    ---
    data:
        got:              2
#! (Sqrt[2] + x)
        expect: (Sqrt[2] + x)^2
        expect_evaluated:              2
#! (Sqrt[2] + x)
    ...
# Pull out multiple factors over the integers modulo 2:
ok  FactorSquareFree[1 + x^4, Modulus -> 2]    ==>     (1 + x)^4
    ---
    data:
        got:        4
#! (1 + x)
        expect: (1 + x)^4
        expect_evaluated:        4
#! (1 + x)
    ...
# Pull out multiple factors in a trigonometric expression:
ok  FactorSquareFree[1 - Cos[2*x], Trig -> True]    ==>     2*Sin[x]^2
    ---
    data:
        got:         2
#! 2 Sin[x]
        expect: 2*Sin[x]^2
        expect_evaluated:         2
#! 2 Sin[x]
    ...
# RefLink[FactorSquareFree,paclet:ref/FactorSquareFree] only pulls out multiple factors:
ok  f = x^9 + 9*x^8 + 21*x^7 - 27*x^6 - 153*x^5 - 81*x^4 + 239*x^3 + 207*x^2 - 108*x - 108 ;; FactorSquareFree[f]    ==>     (3 + x)^3*(-4 + x^2)*(-1 + x^2)^2 # skip
# RefLink[Factor,paclet:ref/Factor] gives a complete factorization:
ok  Factor[f]    ==>     (-2 + x)*(-1 + x)^2*(1 + x)^2*(2 + x)*(3 + x)^3 # skip
# RefLink[Expand,paclet:ref/Expand] is effectively the inverse of RefLink[FactorSquareFree,paclet:ref/FactorSquareFree]:
ok  FactorSquareFree[x^5 - x^3 - x^2 + 1]    ==>     (-1 + x)^2*(1 + 2*x + 2*x^2 + x^3)
    ---
    data:
        got:         2               2    3
#! (-1 + x)  (1 + 2 x + 2 x  + x )
        expect: (-1 + x)^2*(1 + 2*x + 2*x^2 + x^3)
        expect_evaluated:         2               2    3
#! (-1 + x)  (1 + 2 x + 2 x  + x )
    ...
ok  Expand[%]    ==>     1 - x^2 - x^3 + x^5 # skip
# RefLink[FactorSquareFreeList,paclet:ref/FactorSquareFreeList] gives a list of factors:
ok  FactorSquareFreeList[x^8 + 11*x^7 + 43*x^6 + 59*x^5 - 35*x^4 - 151*x^3 - 63*x^2 + 81*x + 54]    ==>     {{1, 1}, {2 + x, 1}, {3 + x, 3}, {-1 + x^2, 2}}
    ---
    data:
        got:                                         2
#! {{1, 1}, {2 + x, 1}, {3 + x, 3}, {-1 + x , 2}}
        expect: {{1, 1}, {2 + x, 1}, {3 + x, 3}, {-1 + x^2, 2}}
        expect_evaluated:                                         2
#! {{1, 1}, {2 + x, 1}, {3 + x, 3}, {-1 + x , 2}}
    ...
# A univariate polynomial has multiple factors if an only if its RefLink[Discriminant,paclet:ref/Discriminant] is zero:
ok  Discriminant[x^5 - x^3 - x^2 + 1, x]    ==>     0
    ---
    data:
        got: 0
        expect: 0
        expect_evaluated: 0
    ...
ok  FactorSquareFree[x^5 - x^3 - x^2 + 1]    ==>     (-1 + x)^2*(1 + 2*x + 2*x^2 + x^3)
    ---
    data:
        got:         2               2    3
#! (-1 + x)  (1 + 2 x + 2 x  + x )
        expect: (-1 + x)^2*(1 + 2*x + 2*x^2 + x^3)
        expect_evaluated:         2               2    3
#! (-1 + x)  (1 + 2 x + 2 x  + x )
    ...
ok  Discriminant[x^5 - x^3 - x^2 - 1, x]    ==>     7684
    ---
    data:
        got: 7684
        expect: 7684
        expect_evaluated: 7684
    ...
ok  FactorSquareFree[x^5 - x^3 - x^2 - 1]    ==>     -1 - x^2 - x^3 + x^5
    ---
    data:
        got:       2    3    5
#! -1 - x  - x  + x
        expect: -1 - x^2 - x^3 + x^5
        expect_evaluated:       2    3    5
#! -1 - x  - x  + x
    ...
