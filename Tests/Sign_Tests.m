(* Created by Wolfram Mathematica 10.0 : www.wolfram.com *)
Import["CompatTests.m"]; 
TapSuite[TapTestSame[Sign[-2.5], -1], TapTestSame[Sign[2.5], 1], 
 TapTestSame[Sign[0], 0], TapTestSame[Sign[{-2, -1, 0, 1, 2}], 
  {-1, -1, 0, 1, 1}], TapTestSameBROKEN[
  HoldComplete[Plot[Sign[x], {x, -3, 3}]], $Failed], 
 TapComment["RefLink[Sign,paclet:ref/Sign] works with symbolic \
representations of numbers:"], TapTestSame[Sign[E - Pi], -1], 
 TapComment[
  "RefLink[Sign,paclet:ref/Sign] gives \"directions\" of complex numbers:"], 
 TapTestSame[Sign[1 + I], (1 + I)/Sqrt[2]], 
 TapComment["The absolute value is always 1:"], TapTestSameBROKEN[Abs[%], 1], 
 TapComment[
  "RefLink[TraditionalForm,paclet:ref/TraditionalForm] formatting:"], 
 TapTestSameBROKEN[sgn(x), sgn*x], TapTestSame[Sign[Tan[10^9]], 1], 
 TapTestSame[Sign[I*Infinity], I], TapTestSame[Sign[ComplexInfinity], 
  Indeterminate], TapTestSameBROKEN[HoldComplete[
   SparseArray[{{1, 1} -> -6, {1, 3} -> I*Pi, {3, 3} -> 2, {4, 2} -> u}]], 
  $Failed], TapTestSameBROKEN[HoldComplete[Sign[%]], $Failed], 
 TapTestSameBROKEN[MatrixForm[%], -(0*I*0*0*0*0*0*1*0*Sign[u]*0)], 
 TapTestSameBROKEN[Series[Sign[x], {x, 0, 5}, 
   Assumptions -> Element[x, Reals]], Inequality[Piecewise[-1]*x, Less, 
   0*1*x, Greater, 0*0*True]], TapTestSameBROKEN[
  HoldComplete[{Plot3D[Re[Sign[x + I*y]], {x, -1, 1}, {y, -1, 1}], 
    Plot3D[Im[Sign[x + I*y]], {x, -1, 1}, {y, -1, 1}]}], $Failed], 
 TapTestSameBROKEN[HoldComplete[Plot[Evaluate[Table[r[n, x] + n/5, {n, 5}]], 
    {x, -Pi, Pi}, Exclusions -> Sin[2^5*Pi*x] == 0]], $Failed], 
 TapTestSameBROKEN[FullSimplify[Table[Integrate[r[n1, x]*r[n2, x], 
     {x, 0, 1}], {n1, 3}, {n2, 3}]], {{1, 0, 0}, {0, 1, 0}, {0, 0, 1}}], 
 TapTestSame[Sign[1/z], 1/Sign[z]], TapTestSame[Sign[z^2], Sign[z]^2], 
 TapTestSame[Sign[Exp[z]], E^(I*Im[z])], TapTestSame[Sign[Sign[z]], Sign[z]], 
 TapTestSame[FullSimplify[Sign[a*b] - Sign[a]*Sign[b] + Sign[a] - Abs[a]/a], 
  (2*I*Im[a]*Sign[a])/a], TapTestSame[Simplify[Sign[z] + z/Abs[z], z > 0], 
  2], TapTestSame[ComplexExpand[Sign[z^a], {z}], Sign[z]^a], 
 TapTestSame[ComplexExpand[Re[ArcSin[x + I*y]], TargetFunctions -> Sign], 
  (-I)*Log[Sign[Sqrt[1 - (x + I*y)^2] + I*(x + I*y)]]], 
 TapTestSame[Integrate[Sign[Sin[x]], {x, 0, 2}], 2], 
 TapTestSame[Integrate[Sign[x^2], {x, -2 + I, Pi + I}], 
  2 - Pi + 2*ArcTan[1/2] - I*Log[5] + 2*I*Log[-I + Pi]], 
 TapTestSameBROKEN[N[%], 0.402041 + 0.776532*I], 
 TapTestSameBROKEN[NIntegrate[Sign[x^2], {x, -2 + I, Pi + I}], 
  0.402041 + 0.776532*I], TapTestSame[Integrate[Sign[x], x], 
  Integrate[Sign[x], x]], TapTestSameBROKEN[Integrate[Sign[x], x, 
   Assumptions -> Element[x, Reals]], Piecewise[-x]*x <= 0*x*True], 
 TapTestSame[FourierTransform[Sign[y], y, x], (I*Sqrt[2/Pi])/x], 
 TapTestSame[LaplaceTransform[Sign[y], y, x], 1/x], 
 TapTestSame[Integrate[Sin[a*x]/x, {x, -Infinity, Infinity}, 
   Assumptions -> Element[a, Reals]], Pi*Sign[a]], 
 TapTestSame[Limit[2*ArcTan[a*x], a -> Infinity, 
   Assumptions -> Element[x, Reals]], (Pi*Abs[x])/x], 
 TapTestSameBROKEN[FullSimplify[%, Assumptions -> Element[x, Reals]], 
  Pi/Sign[x]], TapTestSameBROKEN[PiecewiseExpand[Sign[x]*Sign[1 - x], 
   Element[x, Reals]], Piecewise[-1]*x > 1 || x < 0*1*0 < x < 1*0*True], 
 TapTestSameBROKEN[PiecewiseExpand[Sign[2 - x + Sign[2 - x^3]^3], 
   Element[x, Reals]], Piecewise[-1]*x > 2^(1/3)*1*True], 
 TapTestSame[Sign[1.3], 1], TapTestSameBROKEN[Sign[1.3*I], I], 
 TapComment["For general complex arguments, RefLink[Sign,paclet:ref/Sign] \
tracks the precision of the input:"], TapTestSameBROKEN[Sign[1.5 + I], 
  0.83205 + 0.5547*I], TapTestSame[Sign[-1 - 2*E - E^2 + (1 + E)^2], 
  Sign[-1 - 2*E - E^2 + (1 + E)^2]], TapTestSameBROKEN[Simplify[%], 0], 
 TapTestSame[Sign[(-1 - 2*E - E^2 + (1 + E)^2) + 10^(-100)], 
  Sign[-999999999999999999999999999999999999999999999999999999999999999999999\
9999999999999999999999999999999/100000000000000000000000000000000000000000000\
00000000000000000000000000000000000000000000000000000000 - 2*E - E^2 + 
    (1 + E)^2]], TapTestSameBROKEN[N[%], -1], TapTestSameBROKEN[N[%%, 250], 
  1], TapTestSame[Block[{$MaxExtraPrecision = 10000}, 
   N[Sign[(-1 - 2*E - E^2 + (1 + E)^2) + 10^(-100)], 20]], 1.`19.], 
 TapTestSame[Sign[{{1, 2}, {-2, 1}}], {{1, 1}, {-1, 1}}], 
 TapTestSameBROKEN[NestList[Convolution[#1, Sign[x]*Sign[x + 1]*Sign[1 - x], 
     x] & , Sign[x]*Sign[x + 1]*Sign[1 - x], 3], 
  {Sign[1 - x]*Sign[x]*Sign[1 + x], Inequality[Piecewise[-2] + 4*x*0, 
     LessEqual, x, Less, 1*2*x, Equal, -1] || Inequality[x, Equal, 
     1*4 - 2*x*1, Less, x, LessEqual, 2*2*(2 + x) - 2, Less, x, Less, 
     -1 - 2 - 4*x - 1, Less, x, Less, 0*0*True], 
   Inequality[Piecewise[-x]*(8 + 7*x) - 1, LessEqual, x, LessEqual, 
    0 - 11 + 14*x - 4*x^2*1, LessEqual, x, LessEqual, 2 - (3 + x)^2 - 3, 
    Less, x, LessEqual, -2*(-3 + x)^2*2, Less, x, Less, 
    3*11 + 14*x + 4*x^2 - 2, Less, x, Less, -(x*(-8 + 7*x)*0), Less, x, Less, 
    1*0*True], Inequality[Piecewise[-(1/3)]*(-4 + x)^3*3, LessEqual, x, Less, 
    4*(1/3)*(4 + x)^3 - 4, Less, x, LessEqual, 
    -3*(1/3)*(10 - 42*x^2 - 25*x^3) - 1, LessEqual, x, LessEqual, 
    0*17 - 41*x + 27*x^2 - ((16*x^3)/3)*1, LessEqual, x, LessEqual, 
    2 - 125/3 - 47*x - 17*x^2 - 2*x^3 - 3, Less, x, LessEqual, 
    -2 - 125/3 + 47*x - 17*x^2 + 2*x^3*2, Less, x, Less, 
    3*17 + 41*x + 27*x^2 + (16*x^3)/3 - 2, Less, x, Less, 
    -((1/3)*(10 - 42*x^2 + 25*x^3)*0), Less, x, Less, 1*0*True]}], 
 TapTestSameBROKEN[HoldComplete[Plot[Evaluate[%], {x, -3, 3}]], $Failed], 
 TapTestSameBROKEN[HoldComplete[Plot[Evaluate[Table[sign[n, x], {n, 20}]], 
    {x, -2, 2}]], $Failed], TapTestSame[
  Factor[Together[FunctionExpand[Table[Tanh[2*n*ArcTanh[1/x]], {n, 4}]]]], 
  {(2*x)/(1 + x^2), (4*x*(1 + x^2))/(1 + 6*x^2 + x^4), 
   (2*x*(3 + x^2)*(1 + 3*x^2))/((1 + x^2)*(1 + 14*x^2 + x^4)), 
   (8*x*(1 + x^2)*(1 + 6*x^2 + x^4))/(1 + 28*x^2 + 70*x^4 + 28*x^6 + x^8)}], 
 TapTestSameBROKEN[HoldComplete[Plot[Evaluate[%], {x, -10, 10}]], $Failed]]
